# nginx

Nginx — один из самых популярных в мире веб-серверов, на базе которого размещены некоторые из самых крупных сайтов интернета с огромным трафиком. Это облегченный вариант, который можно использовать как веб-сервер или как обратный прокси.
---

В этом руководстве мы расскажем, как установить Nginx на вашем сервере Ubuntu 20.04, настроить брандмауэр, управлять процессом Nginx и создать блоки сервера для хостинга более одного домена с одного сервера.
---

Предварительные требования
Прежде чем начать прохождение настоящего обучающего модуля, необходимо настроить на сервере обычного пользователя без прав root с привилегиями sudo. Информацию о том, как настроить стандартную учетную запись пользователя, можно найти в руководстве Начальная настройка сервера для Ubuntu 20.04​​​.
---

Создав учетную запись, войдите в систему как пользователь без прав root.
---

Шаг 1 — Установка Nginx
Поскольку Nginx доступен в репозиториях Ubuntu по умолчанию, его можно установить из этих репозиториев с помощью системы пакетов apt.
--

Так как это первое наше взаимодействие с системой пакетов apt в этом сеансе, мы также обновим индекс локальных пакетов, чтобы получить доступ к актуальным спискам 
пакетов. Затем мы можем выполнить установку nginx:
---

sudo apt update
sudo apt install nginx

После принятия процедуры apt выполнит установку Nginx и других требуемых зависимостей на ваш сервер.
---

Шаг 2 — Настройка брандмауэра
---

Перед тестированием Nginx необходимо выполнить настройку программного обеспечения брандмауэра, чтобы разрешить доступ к службе. Nginx регистрирует себя как службу с помощью ufw после установки, упрощая доступ к Nginx.
---

Для вывода списка конфигураций приложений, которые известны ufw, необходимо ввести следующую команду:
---

sudo ufw app list

Необходимо получить список профилей приложений:
---

Output
Available applications:
  Nginx Full
  Nginx HTTP
  Nginx HTTPS
  OpenSSH
Как показал вывод, есть три профиля, доступных для Nginx:

Nginx Full: этот профиль открывает порт 80 (обычный веб-трафик без шифрования) и порт 443 (трафик с шифрованием TLS/SSL)
Nginx HTTP: этот профиль открывает только порт 80 (обычный веб-трафик без шифрования)
Nginx HTTPS: этот профиль открывает только порт 443 (трафик с шифрованием TLS/SSL)
Рекомендуется применять самый ограничивающий профиль, который будет разрешать заданный трафик. Сейчас нам нужно будет разрешить трафик на порту 80.

Для активации можно ввести следующую команду:

sudo ufw allow 'Nginx HTTP'
Для проверки изменений введите:

sudo ufw status
Вывод укажет, какой трафик HTTP разрешен:

Output
Status: active

To                         Action      From
--                         ------      ----
OpenSSH                    ALLOW       Anywhere                  
Nginx HTTP                 ALLOW       Anywhere                  
OpenSSH (v6)               ALLOW       Anywhere (v6)             
Nginx HTTP (v6)            ALLOW       Anywhere (v6)


Шаг 3 — Проверка веб-сервера
---

В конце процесса установки Ubuntu 20.04 запускает Nginx. Веб-сервер уже должен быть запущен и работать.

Используйте команду systemd init system, чтобы проверить работу службы:

systemctl status nginx
Output
● nginx.service - A high performance web server and a reverse proxy server
   Loaded: loaded (/lib/systemd/system/nginx.service; enabled; vendor preset: enabled)
   Active: active (running) since Fri 2020-04-20 16:08:19 UTC; 3 days ago
     Docs: man:nginx(8)
 Main PID: 2369 (nginx)
    Tasks: 2 (limit: 1153)
   Memory: 3.5M
   CGroup: /system.slice/nginx.service
           ├─2369 nginx: master process /usr/sbin/nginx -g daemon on; master_process on;
           └─2380 nginx: worker process
Вывод подтвердили, что служба успешно запущена. Однако лучше всего протестировать ее запуск посредством запроса страницы из Nginx.

Откройте страницу Nginx по умолчанию, чтобы подтвердить работу программного обеспечения через IP-адрес вашего сервера. Если вы не знаете IP-адрес вашего сервера, вы можете найти его с помощью инструмента icanhazip.com, который выдаст вам ваш публичный IP-адрес, полученный от другого расположения в Интернете:

curl -4 icanhazip.com
Когда вы узнаете IP-адрес вашего сервера, введите его в адресную строку браузера:

http://your_server_ip
Вы должны получить начальную страницу Nginx по умолчанию:
